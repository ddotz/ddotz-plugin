# Plan: HUD Command Feature

## Meta
| Key | Value |
|-----|-------|
| Feature ID | `hud-command` |
| Created | 2026-01-31 |
| Status | Plan |
| Priority | High |

## Summary

사용자의 Claude Code statusline 설정을 간편하게 구성할 수 있는 `/dtz:hud` 명령어를 추가합니다.
ddotz-hud 프로젝트(https://github.com/ddotz/ddotz-hud)를 자동으로 설치하고 설정합니다.

## Problem Statement

현재 ddotz-hud를 사용하려면:
1. GitHub에서 수동 클론
2. npm install & npm run build 수동 실행
3. `~/.claude/settings.json`을 수동으로 편집

이 과정이 번거롭고 오류가 발생하기 쉬움.

## Proposed Solution

`/dtz:hud` 명령어로 원클릭 설정:
- **setup**: ddotz-hud 설치 및 settings.json 자동 구성
- **update**: 최신 버전으로 업데이트
- **status**: 현재 설정 상태 확인
- **reset**: statusline 기본값으로 복원

## Scope

### In Scope
- `/dtz:hud` skill 구현
- ddotz-hud 자동 클론 및 빌드
- `~/.claude/settings.json` statusLine 설정 자동화
- setup, update, status, reset 서브커맨드
- 기존 설정 백업 기능

### Out of Scope
- ddotz-hud 자체 기능 수정
- 커스텀 HUD 테마/설정 옵션
- Windows/Linux 지원 (현재 macOS 우선)

## Technical Approach

### 1. Skill 구조
```
skills/
  hud/
    skill.md          # Skill 정의 및 명령어 문서
```

### 2. 핵심 동작

#### setup 명령
1. `~/.claude/hud/` 디렉토리 생성
2. ddotz-hud 저장소 클론 (또는 기존 있으면 pull)
3. `npm install && npm run build` 실행
4. `~/.claude/settings.json` 읽기
5. 기존 statusLine 설정 백업 (있으면)
6. statusLine 설정 추가/업데이트:
   ```json
   {
     "statusLine": {
       "type": "command",
       "command": "node ~/.claude/hud/ddotz-hud/dist/index.js",
       "padding": 0
     }
   }
   ```
7. 설정 완료 메시지 출력

#### update 명령
1. `~/.claude/hud/ddotz-hud` 존재 확인
2. `git pull` 실행
3. `npm install && npm run build` 실행
4. 업데이트 완료 메시지

#### status 명령
1. `~/.claude/settings.json` 읽기
2. 현재 statusLine 설정 표시
3. ddotz-hud 설치 상태 확인
4. 버전 정보 표시

#### reset 명령
1. `~/.claude/settings.json`에서 statusLine 제거
2. (선택) ddotz-hud 디렉토리 삭제

### 3. 설정 파일 경로
| Path | Purpose |
|------|---------|
| `~/.claude/settings.json` | Claude Code 메인 설정 |
| `~/.claude/hud/ddotz-hud/` | HUD 소스코드 설치 위치 |
| `~/.claude/hud/.backup/` | 설정 백업 저장 |

## Dependencies

### External
- GitHub 접근 (ddotz/ddotz-hud 저장소)
- Node.js 및 npm
- git CLI

### Internal
- ddotz-plugin 기존 skill 구조

## Success Criteria

- [ ] `/dtz:hud setup` 실행 시 HUD 자동 설치 및 설정 완료
- [ ] `/dtz:hud update` 실행 시 최신 버전으로 업데이트
- [ ] `/dtz:hud status` 실행 시 현재 상태 정확히 표시
- [ ] `/dtz:hud reset` 실행 시 기본 상태로 복원
- [ ] Claude Code 재시작 후 HUD 정상 동작 확인

## Risks & Mitigations

| Risk | Impact | Mitigation |
|------|--------|------------|
| 설정 파일 손상 | High | 변경 전 자동 백업 |
| 빌드 실패 | Medium | 에러 메시지 상세 출력, 수동 설치 가이드 제공 |
| 네트워크 오류 | Low | 타임아웃 및 재시도 로직 |

## Timeline

| Phase | Task | Estimate |
|-------|------|----------|
| Design | 상세 설계 문서 작성 | 0.5h |
| Implementation | skill.md 작성 | 1h |
| Testing | 전체 플로우 테스트 | 0.5h |
| **Total** | | **2h** |

## References

- [ddotz-hud Repository](https://github.com/ddotz/ddotz-hud)
- [기존 handoff skill](/Users/hyuns/Code/ddotz-plugin/skills/handoff/skill.md)
- [Claude Code statusLine 설정](~/.claude/settings.json)

---
*Generated by PDCA Plan Phase*
