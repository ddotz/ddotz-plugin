---
name: handoff
description: Save and restore session context for seamless continuation
triggers:
  - handoff
  - 핸드오프
  - 인계
  - session save
  - 세션 저장
---

# DTZ Handoff Skill

세션 컨텍스트를 저장하고 복원하여 작업 연속성을 보장합니다.

## Commands

| Command | Description |
|---------|-------------|
| `/dtz:handoff` | 현재 세션 상태 저장 |
| `/dtz:handoff save [name]` | 이름 지정하여 저장 |
| `/dtz:handoff load [id]` | 특정 handoff 로드 |
| `/dtz:handoff list` | 저장된 handoff 목록 |
| `/dtz:handoff clear` | handoff 기록 정리 |

## Save Procedure

### ⚠️ CRITICAL: Timestamp Rules

> **NEVER guess or fabricate timestamps. ALWAYS execute Bash commands first.**

1. **[MANDATORY FIRST STEP] 시스템 시간 조회**

   **문서 작성 전에 반드시 아래 Bash 명령을 실행하세요:**

   ```bash
   # 1. 현재 시스템 시간 가져오기 (이 값을 Created 필드에 사용)
   date "+%Y-%m-%d %H:%M:%S"

   # 2. Session ID 생성 (이 값을 Session ID에 사용)
   echo "$(date +%Y-%m-%d)_$(openssl rand -hex 3)"
   ```

   **규칙:**
   - ❌ 절대 timestamp를 추정하거나 임의로 작성하지 마세요
   - ❌ "현재 시간이 대략..." 같은 가정 금지
   - ✅ 반드시 `date` 명령 실행 결과를 그대로 복사해서 사용
   - ✅ Bash 실행 → 결과 확인 → 그 값을 문서에 복사

2. **정보 수집**
   - TaskList로 현재 TODO 수집
   - 대화에서 주요 결정사항 추출
   - 최근 작업 파일 목록 정리

3. **문서 생성**
   - Step 1에서 가져온 **정확한 시스템 시간**을 `Created` 필드에 사용
   - Step 1에서 생성한 **정확한 Session ID**를 사용
   - 표준 템플릿으로 구성

4. **저장**
   - `.dtz/handoffs/{session-id}.md` 저장
   - `.dtz/handoffs/latest.md` 업데이트

## Load Procedure

1. **파일 읽기**
   - ID 지정 시: `.dtz/handoffs/{id}.md`
   - ID 없으면: `.dtz/handoffs/latest.md`

2. **요약 출력**
   - Session ID, 생성 날짜
   - Context 요약
   - Pending Tasks

3. **TODO 복원**
   - Pending Tasks를 TaskCreate로 생성

## Handoff Document Template

> ⚠️ `{실제_시스템_시간}`, `{실제_session_id}` 자리에는 **반드시 Bash 명령 실행 결과**를 복사해서 붙여넣으세요.

```markdown
# Session Handoff

## Meta
| Key | Value |
|-----|-------|
| Session ID | `{실제_session_id}` |
| Created | `{실제_시스템_시간}` |
| Project | `{directory name}` |

## Context Summary
{2-3문장 작업 요약}

## Completed Tasks
- [x] 완료 항목

## Pending Tasks
- [ ] 미완료 항목

## Key Decisions
| Decision | Rationale | Date |

## Important Files
| File | Description |

## Next Steps
1. 다음 할 일

---
*Generated by DTZ Handoff v2.0.4*
```

## Auto-Load on Session Start

새 세션 시작 시 자동으로 `.dtz/handoffs/latest.md` 감지.
존재하면 요약 정보를 표시하고 `/dtz:handoff load` 안내.
