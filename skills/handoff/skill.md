---
name: handoff
description: Save and restore session context for seamless continuation
triggers:
  - handoff
  - í•¸ë“œì˜¤í”„
  - ì¸ê³„
  - session save
  - ì„¸ì…˜ ì €ì¥
---

# DTZ Handoff Skill

ì„¸ì…˜ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì €ì¥í•˜ê³  ë³µì›í•˜ì—¬ ì‘ì—… ì—°ì†ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤.

## Commands

| Command | Description |
|---------|-------------|
| `/dtz:handoff` | í˜„ì¬ ì„¸ì…˜ ìƒíƒœ ì €ì¥ |
| `/dtz:handoff save [name]` | ì´ë¦„ ì§€ì •í•˜ì—¬ ì €ì¥ |
| `/dtz:handoff load [id]` | íŠ¹ì • handoff ë¡œë“œ |
| `/dtz:handoff list` | ì €ì¥ëœ handoff ëª©ë¡ |
| `/dtz:handoff clear` | handoff ê¸°ë¡ ì •ë¦¬ |

---

## Save Procedure

`/dtz:handoff` ë˜ëŠ” `/dtz:handoff save` ì‹¤í–‰ ì‹œ:

### Step 1: Collect Information

1. **TaskList ë„êµ¬ë¡œ í˜„ì¬ TODO ìˆ˜ì§‘**
   ```
   TaskList ì‹¤í–‰í•˜ì—¬ pending/in_progress/completed íƒœìŠ¤í¬ ìˆ˜ì§‘
   ```

2. **ëŒ€í™” ë‚´ì—­ì—ì„œ ì£¼ìš” ê²°ì •ì‚¬í•­ ì¶”ì¶œ**
   - ì•„í‚¤í…ì²˜ ê²°ì •
   - ê¸°ìˆ  ìŠ¤íƒ ì„ íƒ
   - ì¤‘ìš”í•œ íŠ¸ë ˆì´ë“œì˜¤í”„

3. **ìµœê·¼ ì‘ì—… íŒŒì¼ ëª©ë¡**
   - ì´ë²ˆ ì„¸ì…˜ì—ì„œ ìˆ˜ì •/ìƒì„±í•œ íŒŒì¼ë“¤

4. **Git ì •ë³´ ìˆ˜ì§‘** (ê°€ëŠ¥í•œ ê²½ìš°)
   ```bash
   git branch --show-current
   git log -1 --oneline
   ```

### Step 2: Generate Document

Session ID ìƒì„±: `{YYYY-MM-DD}_{random-6-chars}`

ë‹¤ìŒ í…œí”Œë¦¿ìœ¼ë¡œ ë¬¸ì„œ ìƒì„±:

```markdown
# Session Handoff

## Meta
| Key | Value |
|-----|-------|
| Session ID | `{session-id}` |
| Created | `{timestamp}` |
| Project | `{pwd ë§ˆì§€ë§‰ ë””ë ‰í† ë¦¬ëª…}` |
| Previous Session | `{ì´ì „ handoff id ë˜ëŠ” "none"}` |

## Context Summary
{í˜„ì¬ ì‘ì—…ì— ëŒ€í•œ 2-3ë¬¸ì¥ ìš”ì•½}

## Completed Tasks
{TaskListì—ì„œ completed ìƒíƒœì¸ í•­ëª©}
- [x] ì™„ë£Œ í•­ëª© 1
- [x] ì™„ë£Œ í•­ëª© 2

## Pending Tasks
{TaskListì—ì„œ pending/in_progress ìƒíƒœì¸ í•­ëª©}
- [ ] ë¯¸ì™„ë£Œ í•­ëª© 1
- [ ] ë¯¸ì™„ë£Œ í•­ëª© 2

## Key Decisions
| Decision | Rationale | Date |
|----------|-----------|------|
| ê²°ì • ë‚´ìš© | ì´ìœ  | ë‚ ì§œ |

## Important Files
| File | Description |
|------|-------------|
| `path/to/file` | ì—­í•  ì„¤ëª… |

## Current State
- **Branch**: `{git branch}`
- **Mode**: `{max | eco | none}`
- **Last Command**: `{ë§ˆì§€ë§‰ ì£¼ìš” ëª…ë ¹}`
- **Blockers**: {ìˆìœ¼ë©´ ê¸°ìˆ }

## Next Steps
1. ë‹¤ìŒ í•  ì¼ 1
2. ë‹¤ìŒ í•  ì¼ 2

## Notes
{ì¶”ê°€ ì°¸ê³ ì‚¬í•­}

---
*Generated by DTZ Handoff v1.0.0*
```

### Step 3: Save

1. **ë””ë ‰í† ë¦¬ í™•ì¸/ìƒì„±**
   ```bash
   mkdir -p .dtz/handoffs
   ```

2. **Config ì½ê¸°** (ìˆëŠ” ê²½ìš°)
   ```
   .dtz/config.json íŒŒì¼ì´ ìˆìœ¼ë©´ ì½ì–´ì„œ ì„¤ì • ì ìš©
   ê¸°ë³¸ê°’: { "handoff": { "maxHistory": 10, "autoLoad": true } }
   ```

3. **íˆìŠ¤í† ë¦¬ ì •ë¦¬** (maxHistory ì´ˆê³¼ ì‹œ)
   ```
   .dtz/handoffs/ ë‚´ íŒŒì¼ ê°œìˆ˜ê°€ maxHistory ì´ˆê³¼í•˜ë©´:
   - ê°€ì¥ ì˜¤ë˜ëœ íŒŒì¼ë“¤ ì‚­ì œ (latest.md ì œì™¸)
   - ì‚­ì œëœ íŒŒì¼ ê°œìˆ˜ ë¡œê·¸
   ```

4. **íŒŒì¼ ì €ì¥**
   - `.dtz/handoffs/{session-id}.md` ì— ì €ì¥
   - `.dtz/handoffs/latest.md` ì— ë™ì¼ ë‚´ìš© ë³µì‚¬

5. **ì™„ë£Œ ë©”ì‹œì§€ ì¶œë ¥**
   ```
   âœ… Handoff ì €ì¥ ì™„ë£Œ

   ğŸ“„ Session ID: {session-id}
   ğŸ“ Location: .dtz/handoffs/{session-id}.md

   ğŸ“Š Summary:
   - Completed: {n} tasks
   - Pending: {m} tasks
   - Key Decisions: {k}

   ë‹¤ìŒ ì„¸ì…˜ì—ì„œ ìë™ìœ¼ë¡œ ë¡œë“œë˜ê±°ë‚˜ `/dtz:handoff load`ë¡œ ë³µì›í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
   ```

---

## Load Procedure

`/dtz:handoff load [id]` ì‹¤í–‰ ì‹œ:

### Step 1: Read Document

1. `id` ì§€ì •ëœ ê²½ìš°: `.dtz/handoffs/{id}.md` ì½ê¸°
2. `id` ì—†ëŠ” ê²½ìš°: `.dtz/handoffs/latest.md` ì½ê¸°
3. íŒŒì¼ ì—†ìœ¼ë©´:
   ```
   â„¹ï¸ ì €ì¥ëœ handoffê°€ ì—†ìŠµë‹ˆë‹¤.
   `/dtz:handoff` ëª…ë ¹ìœ¼ë¡œ í˜„ì¬ ì„¸ì…˜ì„ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
   ```

### Step 2: Display Summary

```
ğŸ“‹ Handoff ë¡œë“œ

Session: {session-id}
ìƒì„±: {created-date}
í”„ë¡œì íŠ¸: {project-name}

ğŸ“ Context:
{context-summary}

ğŸ“Œ Pending Tasks ({n}ê°œ):
  1. {task-1}
  2. {task-2}
  ...

ğŸ”‘ Key Decisions:
  - {decision-1}
  - {decision-2}

ğŸ“ Important Files:
  - {file-1}: {description}
  - {file-2}: {description}
```

### Step 3: Restore State

1. **TODO ë³µì›** - Pending Tasksë¥¼ TaskCreateë¡œ ìƒì„±:
   ```
   TaskCreate({subject: task-subject, description: task-description})
   ```

2. **Next Steps ì•ˆë‚´**
   ```
   ğŸš€ Next Steps:
   1. {next-step-1}
   2. {next-step-2}

   ì´ì–´ì„œ ì‘ì—…ì„ ì‹œì‘í•˜ì„¸ìš”!
   ```

---

## List Procedure

`/dtz:handoff list` ì‹¤í–‰ ì‹œ:

1. `.dtz/handoffs/` ë””ë ‰í† ë¦¬ì˜ ëª¨ë“  `.md` íŒŒì¼ ë‚˜ì—´ (latest.md ì œì™¸)
2. ê° íŒŒì¼ì—ì„œ Session ID, Created, Context Summary ì¶”ì¶œ
3. í…Œì´ë¸”ë¡œ ì¶œë ¥:

```
ğŸ“‹ Handoff ëª©ë¡

| # | Session ID | Created | Summary |
|---|------------|---------|---------|
| 1 | 2025-01-30_abc123 | 2025-01-30 14:30 | DTZ handoff êµ¬í˜„... |
| 2 | 2025-01-29_def456 | 2025-01-29 10:15 | ë²„ê·¸ ìˆ˜ì • ì‘ì—…... |

Total: 2 handoffs

`/dtz:handoff load {session-id}` ë¡œ ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```

---

## Clear Procedure

`/dtz:handoff clear` ì‹¤í–‰ ì‹œ:

1. ì‚¬ìš©ì í™•ì¸:
   ```
   âš ï¸ ëª¨ë“  handoff ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?
   ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
   ```

2. í™•ì¸ ì‹œ:
   - `.dtz/handoffs/` ë‚´ ëª¨ë“  íŒŒì¼ ì‚­ì œ
   - `âœ… Handoff ê¸°ë¡ì´ ì •ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.` ì¶œë ¥

---

## Auto-Load on Session Start

ìƒˆ ì„¸ì…˜ ì‹œì‘ ì‹œ CLAUDE.mdì˜ Session Start Protocolì— ë”°ë¼ ìë™ ì‹¤í–‰ë©ë‹ˆë‹¤.

1. `.dtz/handoffs/latest.md` ì¡´ì¬ í™•ì¸
2. ì¡´ì¬í•˜ë©´ ì‚¬ìš©ìì—ê²Œ ì•ˆë‚´ í›„ í™•ì¸
3. í™•ì¸ ì‹œ Load Procedure ì‹¤í–‰

ìì„¸í•œ ë‚´ìš©ì€ CLAUDE.md ì°¸ì¡°.

---

## Error Handling

| ìƒí™© | ì²˜ë¦¬ |
|------|------|
| `.dtz/` ì—†ìŒ | ìë™ ìƒì„± |
| handoff íŒŒì¼ ì†ìƒ | ê²½ê³  í›„ ëª©ë¡ì—ì„œ ì œì™¸ |
| TODO ë³µì› ì‹¤íŒ¨ | ê°œë³„ ì‹¤íŒ¨ ì•Œë¦¼, ê³„ì† ì§„í–‰ |
| ê¶Œí•œ ì˜¤ë¥˜ | ëª…í™•í•œ ì—ëŸ¬ ë©”ì‹œì§€ |

---

## Integration

### With max/eco modes
- handoff ì €ì¥ ì‹œ í˜„ì¬ í™œì„±í™”ëœ ëª¨ë“œ ì •ë³´ í¬í•¨
- ë¡œë“œ ì‹œ ëª¨ë“œ ë³µì›í•˜ì§€ ì•ŠìŒ (ì‚¬ìš©ì ì„ íƒ)

### With Task System
- Save: `TaskList` â†’ Handoff ë¬¸ì„œ
- Load: Handoff ë¬¸ì„œ â†’ `TaskCreate`

### With Git
- ì €ì¥ ì‹œ í˜„ì¬ ë¸Œëœì¹˜, ìµœê·¼ ì»¤ë°‹ ì •ë³´ í¬í•¨
- ë¸Œëœì¹˜ ì „í™˜ì€ í•˜ì§€ ì•ŠìŒ (ì•ˆë‚´ë§Œ)

---

## Configuration

`.dtz/config.json` íŒŒì¼ë¡œ handoff ë™ì‘ì„ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Config Schema

```json
{
  "handoff": {
    "maxHistory": 10,
    "autoLoad": true
  }
}
```

### Options

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `maxHistory` | number | 10 | ë³´ê´€í•  ìµœëŒ€ handoff ê°œìˆ˜. ì´ˆê³¼ ì‹œ ì˜¤ë˜ëœ ê²ƒë¶€í„° ì‚­ì œ |
| `autoLoad` | boolean | true | ì„¸ì…˜ ì‹œì‘ ì‹œ ìë™ ë¡œë“œ ì—¬ë¶€ |

### Example

```json
{
  "handoff": {
    "maxHistory": 5,
    "autoLoad": true
  }
}
```

Config íŒŒì¼ì´ ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ì´ ì ìš©ë©ë‹ˆë‹¤.
